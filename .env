# =============================================================================
# StockUs Docker Compose Environment Variables
# =============================================================================
# Copy this file to .env and fill in actual values before running docker compose
#
# NOTE: DATABASE_URL is constructed automatically in docker-compose.yml from
# POSTGRES_* variables. Do not set DATABASE_URL manually.
#
# For production deployment:
# - Update FRONTEND_URL and NEXT_PUBLIC_API_URL to actual domain names
# - Set MIDTRANS_IS_PRODUCTION=true
# - Use strong passwords and secrets
# =============================================================================

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=stockus

# -----------------------------------------------------------------------------
# Backend Server
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=3000

# -----------------------------------------------------------------------------
# JWT Authentication
# -----------------------------------------------------------------------------
# Use a strong random string, at least 32 characters
JWT_SECRET=your-secret-key-at-least-32-characters-long
JWT_ACCESS_EXPIRES_MINUTES=15
JWT_REFRESH_EXPIRES_DAYS=7

# -----------------------------------------------------------------------------
# Email (Resend)
# -----------------------------------------------------------------------------
# Get API key from: https://resend.com/api-keys
RESEND_API_KEY=re_your_api_key
EMAIL_FROM=noreply@yourdomain.com

# -----------------------------------------------------------------------------
# URLs
# -----------------------------------------------------------------------------
# FRONTEND_URL: Used by backend for CORS and email links
FRONTEND_URL=http://localhost:3000

# BACKEND_URL: Internal Docker network hostname (uses 'backend' service name)
# This is set automatically in docker-compose.yml, no need to override
# BACKEND_URL=http://backend:3000

# NEXT_PUBLIC_API_URL: Used by frontend client-side to call backend API
# For local development/testing: point to backend external URL
# For production: update to your backend domain or API gateway
NEXT_PUBLIC_API_URL=http://localhost:3001

# -----------------------------------------------------------------------------
# Midtrans Payment Gateway
# -----------------------------------------------------------------------------
# Get keys from: https://dashboard.midtrans.com -> Settings -> Access Keys
MIDTRANS_SERVER_KEY=your_server_key
MIDTRANS_CLIENT_KEY=your_client_key
MIDTRANS_IS_PRODUCTION=false

# -----------------------------------------------------------------------------
# Referral System
# -----------------------------------------------------------------------------
# Reward amount in IDR when referred user completes payment
REFERRAL_REWARD_AMOUNT=50000

# -----------------------------------------------------------------------------
# Cloudflare R2 Storage
# -----------------------------------------------------------------------------
# Get credentials from: Cloudflare Dashboard -> R2 -> Manage R2 API Tokens
CLOUDFLARE_ACCOUNT_ID=your_account_id
R2_ACCESS_KEY_ID=your_access_key
R2_SECRET_ACCESS_KEY=your_secret_key
R2_BUCKET_NAME=your_bucket_name

# Video URL expiry times (in seconds)
VIDEO_UPLOAD_URL_EXPIRY=900      # 15 minutes
VIDEO_PLAYBACK_URL_EXPIRY=3600   # 1 hour

# -----------------------------------------------------------------------------
# Frontend Port (optional)
# -----------------------------------------------------------------------------
# Override the host port that maps to frontend container port 3000
# FRONTEND_PORT=3000
